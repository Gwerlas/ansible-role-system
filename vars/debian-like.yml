---
# Time (services hasn't the 'd' letter at the end of their name)
debian_time_backends:
  chrony:
    services:
      - chrony{{ (ansible_service_mgr == 'systemd') | ternary('.service', '') }}
  ntp:
    services:
      - ntp{{ (ansible_service_mgr == 'systemd') | ternary('.service', '') }}

time_backends: |
  {{
    default_time_backends |
    combine(debian_time_backends, recursive=true)
  }}

# Packages
apt_mirror: "{{ system_apt_mirror | default(apt_default_mirror) }}"
apt_sections: "{{ system_apt_sections | default(apt_default_sections) }}"

debian_release: "{{ 'testing' if ansible_distribution_release == 'n/a' else ansible_distribution_release }}"

default_networks:
  service_name: networking
  template:
    src: network/interfaces.d/netiface.j2
    dest: /etc/network/interfaces.d/%s

packages_upgrade_policy:
  upgrade: dist
  autoremove: true

packages_update_policy:
  marker: /var/cache/gwsys

networks_types:
  bond:
    packages:
      - ifenslave
  bridge:
    packages:
      - bridge-utils

packages:
  gnome:
    - gnome-core
  unattended-upgrades:
    - apt-listchanges
    - unattended-upgrades

reboot_detection_policy:
  cmd: test ! -f /var/run/reboot-required
